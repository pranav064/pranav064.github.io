<!DOCTYPE html>
<html>
<head>
  <title>Teacher Login</title>
</head>
<body>
  <h2>Teacher Login / Signup</h2>

  <input type="email" id="email" placeholder="Email" />
  <input type="password" id="password" placeholder="Password" />
  <br><br>
  <button onclick="signUp()">Sign Up</button>
  <button onclick="login()">Login</button>
  <button onclick="logout()">Logout</button>

  <p id="status"></p>

  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
  import {
    getAuth,
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword,
    signOut,
    onAuthStateChanged
  } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";

  // ----- YOUR FIREBASE CONFIG (leave as you already had it) -----
  const firebaseConfig = {
    apiKey: "AIzaSyAtszwyVhBcJtCHPTjLYdyHud0n9LFnUHM",
    authDomain: "school-portal-a56dc.firebaseapp.com",
    projectId: "school-portal-a56dc",
    storageBucket: "school-portal-a56dc.appspot.com",
    messagingSenderId: "1034844606726",
    appId: "1:1034844606726:web:d69b724b7644ca3a9e8e87",
    measurementId: "G-D4T8D0NCVN"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // Helper: show status to user
  function setStatus(text) {
    const el = document.getElementById("status");
    if (el) el.textContent = text;
  }

  // ------------- Make functions global so buttons can call them -------------
  // Sign Up (creates an account)
  window.signUp = async function () {
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value;

    if (!email || !password) {
      setStatus("Enter email and password (password >= 6 chars).");
      return;
    }

    try {
      await createUserWithEmailAndPassword(auth, email, password);
      setStatus("✅ Signup successful! Redirecting...");
      // Optional: send to dashboard after signup
      window.location.href = "teacher-dashboard.html";
    } catch (err) {
      console.error("Signup error:", err);
      setStatus("Signup error: " + err.message);
    }
  };

  // Login
  window.login = async function () {
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value;

    if (!email || !password) {
      setStatus("Enter email and password.");
      return;
    }

    try {
      await signInWithEmailAndPassword(auth, email, password);
      setStatus("✅ Login successful! Redirecting...");
      window.location.href = "teacher-dashboard.html";
    } catch (err) {
      console.error("Login error:", err);
      setStatus("Login error: " + err.message);
    }
  };

  // Logout
  window.logout = async function () {
    try {
      await signOut(auth);
      setStatus("Logged out!");
    } catch (err) {
      console.error("Logout error:", err);
      setStatus("Logout error: " + err.message);
    }
  };

  // Auto-check auth state and show status (and optionally redirect)
  onAuthStateChanged(auth, (user) => {
    if (user) {
      setStatus("Logged in as: " + user.email);
      // If you want to auto-redirect logged-in users away from auth.html,
      // uncomment the following lines:
      // if (location.pathname.endsWith("auth.html")) {
      //   window.location.href = "teacher-dashboard.html";
      // }
    } else {
      setStatus("Not logged in.");
    }
  });
</script>

</body>
</html>


